## 数据库
#### 1. SQL语言包括哪些类型?
> 数据定义：Create Table, Alter Table, Drop Table , Create/Drop Index
> 数据操纵：Select, Insert, update, delete
> 数据控制：grant, revoke
#### 2. 什么是左连接，什么是右连接，什么是全连接，什么是内连接
>答：内连接：就是保证两个表中所有行都满足连接条件，外连接就是只限制其中一个表的行，不限制另一个表的行，分为左连接、右连接、全连接
>左连接：包含左边表的全部行以及右边表中全部匹配的行 eg: select A.c1, B.c2 from A left join B on A.c3 = B.c3;
>右连接：包含右边表的全部行以及左边全部匹配的行， eg: select A.c1, B.c2 from A right join B on A.c3 = B.c3;
>全连接：包含左、右两个表的全部行，不管在另一边的表中是否存在与它们匹配的行 eg: select A.c1, B.c2 from A full join B on A.c3 = B.c3;
#### 3. 数据库的事物有哪些特征？
>答：主要有四个特征，ACID, 原子性，一致性，隔离性，持久性。
>原子性：指事物包含的所有操作要么全部成功，要么全部回滚
>一致性：指事物必须使数据库从一个一致性状态变换到另一个一致性状态，也就是说一个事物执行之前和执行之后都必须处于一致性状态
>隔离性：隔离性是当多个用户并发访问数据库时，比如操作同一张表时，数据库为一个用户开启的事务，不能被其他事务的操作干扰，多个并发事务之间要相互隔离
>持久性：指一个事务一旦被提交了，那么对数据库中的数据的改变就是永久性的，即便是在数据库系统遇到故障的情况下也不会丢失提交事务的操作
#### 3.1 如何维护数据库的完整性和一致性？
>答：尽可能使用约束，如check, 主键，外键，非空字段，效率最高，也最方便，其次是使用触发器，这种方法可以保证，无论什么业务系统访问数据库都可办证数据库的完整性和一致性，最后考虑的是自写业务逻辑，但这样做麻烦，编程复杂，效率较低
#### 3. 数据库中的隔离等级有哪些？
>脏读：指在一个事务处理过程中读取了另一个未提交事务中的数据
>不可重复读：指在对于数据库中的某个数据，一个事务范围内多次查询却返回了不同的数据值，这是由于在查询间隔，被另一个事务修改并提交了
>幻读：事务非独立执行时发生的一种现象
>mysql四个隔离等级：
>serializable（串行化）：可避免脏读，不可重复读，幻读的发生
>Repeatable read（可重复读）：可避免脏读，不可重复读的发生
>Read committed（读已提交）：可避免脏读的发生
>Read uncommitted （读未提交）：最低级别，任何情况都无法保障
#### 4. 数据库的索引有什么用？用什么来实现的，缺点？
>答：索引是用来加快查找速度的，目前在数据库中一般是使用B+树来实现索引的，缺点是减慢了数据录入的速度，同时也增加了数据库的尺寸大小
#### 5. B树和B+树有什么区别，为什么索引不用B树？
>答：B+树在非叶子结点不保存数据，只在叶子结点保存。而B树在叶子结点和非叶子结点都保存。这种结构导致如果用B树来进行查询，会增加磁盘IO的次数，导致性能不B+树
#### 6. 什么是乐观锁，什么是悲观锁？
>答：悲观锁就是每次拿数据的时候都会上锁，乐观锁是每次去拿都不上锁，两锁各有优缺点，乐观锁用于写比较少的情况下，写多的话用悲观锁。
#### 7. 什么是存储过程？用什么来调用？
>答：存储过程是一个预编译的SQL语句，简单的说存储过程是为了完成某个数据库中的特定功能而编写的语句集，该语句包括SQL语句（对数据的增删改查）、条件语句和循环语句等。优点是允许模块化的设计，就是说只需创建一次，以后再该程序中就可以调用多次。如果某次操作需要执行多次SQL，使用存储过程比单纯SQL语句执行要快。可以用一个命令对象来调用存储过程（CALL）
#### 8. 触发器的作用？
>答：触发器是一种特殊的存储过程，主要是通过事件来触发而被执行的。它可以强化约束，来维护数据的完整性和一致性，可以跟踪数据库内的操作从而不允许未经许可的更新和变化。可以联级运算。如，某表上的触发器上包含对另一个表的数据操作，而该操作又会导致该表触发器触发。
#### 9. 什么是视图？游标是什么？
>答：视图是一种虚拟的表，具有和物理表相同的功能。可以对视图进行增删改查操作，视图通常是有一个表或者多个表的行或列的子集。对视图的修改不影响基本表。它使得我们获得数据更容易，相比多表查询
>游标：是对查询出来的结果作为一个单元来有效的处理。游标可以定在该单元中的特定行，从结果集的当前行检索一行或多行。可以对结果集当前行做修改。一般不使用，但是需要逐条处理数据的时候，游标显得很重要，游标用于定位结果集的行，同过判断全局变量@@FETCH_STAUS可以判断是否到了最后，通常此变量不等于0表示出错或到了最后。
#### 10. 数据库的三大范式？
>第一范式：保持数据的原子性：即实体中的某个属性不能有多个值或不能用重复的属性
>第二范式：在第一范式的基础上，实体的每个非主键属性完全函数依赖于主键属性
>不满足二会出现：数据信息冗余，增删改查出现问题，
>第三范式：在满足第二范式的基础上，在实体中不存在非主键属性传递函数依赖于主键属性
####11. 项目中常见的SQL语句优化？
>1）SQL语句及索引的优化
>2）数据库表结构的优化
>3）系统配置的优化
>4）硬件的优化
>1. where和having各有用处，
>where是一个约束声明，使用Where来约束来自数据库的数据，Where是在结果返回之前起作用的，且Where中不能使用聚合函数
>Having是一个过滤声明，是在查询返回结果集以后对查询结果进行的过滤操作，在Having中可以使用聚合函数
>2. 少用*
>3. 多Exists, 少in
>4. 语句要编写简洁，能用一句千万不能用两句
#### 12. 如何设计一个高并发的系统？
> 答：1.数据库的优化，包括事务隔离等级，SQL语句的优化，索引的优化
> 2. 使用缓存，尽量减少数据库I/0
> 3. 分布式数据库，分布式缓存
> 4. 服务器的负载均衡
